---
title: 如何用c语言做一个简易推箱子游戏
date: 2021-11-24 20:23:07
tags:
	- 学习
	- 游戏
	- 实践
---
### 零.设计思路

打印地图，通过移动角色将箱子推到目标点，当图中箱子数为0时，游戏胜利。

### 一.打印地图
将空白，墙，角色，目标点**设置为不同值**，填充在二维数组中，再通过循环，将地图打印。
![map](/img/ditu.jpg)
<!--more-->
![print](/img/dayin.jpg)
### 二.角色的移动
在打印地图中，我们确定了角色的位置。所以要想让角色移动，得要让**角色的坐标**随输入的移动位置而**相应的改变**，然后再**重新打印地图**。(细节:定义新行、列的指针指向初始位置的地址，移动后新坐标的值改变--将初始坐标保存)
![move](/img/yidong.jpg)
### 三.移动过程中的各种情况
#### 1.移动方向为墙或者目标点
##### 输出禁止前行/坐标不改变
#### 2.移动的目标点是空白
##### 角色对应的值赋值给新坐标，空白的值赋给人的原坐标，再把新坐标赋值给原坐标(**新一轮的坐标替换**)
#### 3.移动的目标点是箱子
##### 将新坐标的值赋值给下一个坐标，移动角色，下一个坐标(箱子的坐标)对应改变
##### ①.改变的位置是墙或箱子
###### 输出移动不了
##### ②.改变的位置是空白
###### 箱子的值赋给改变后的坐标，角色的值赋给箱子的坐标，空白的值赋给原坐标的指针，再原坐标指针指向角色的位置坐标(保证**指针一直指向角色位置的坐标**)
##### ③.改变的位置是目标点
###### 在②中，目标点坐标对应的值将被箱子的值**覆盖**，不需设置额外变量计算目标点个数(在重新打印地图中计算目标点的值的个数)
![guocheng](/img/yidongguocheng.jpg)
### 四.判断
#### 先对地图做一次循环，确定目标点的个数，并赋值给一个变量，当这个这个**变量为0**时，游戏胜利。(在移动中可设置一个输入值为认输)
![judge](/img/panduan.jpg)
### 五.优化
#### 1.设置一个菜单，让玩家进行选择
![menu](/img/caidan.jpg)
#### 2.设置多关卡
![guanka](/img/guanka.jpg)
#### 3.利用函数，结构清晰
![jiegou](/img/jiegou.jpg)
### 六.问题
#### 1.地图需要自己排版
#### 2.关卡需要自己设计，每次加一个关卡都要重写一个函数
#### 3.游戏单调，无音效，图片特效。
### 七.所学
#### 1.学习了大程序的函数结构布局，让代码清晰
#### 2.学习了_getch()、exit(0)、system("cls")、等新知识
#### 3.c语言代码的新用法
### 八.游戏实况
![shikuang](/img/3.jpg)
![shikuang](/img/2.jpg)
![shikuang](/img/3.gif)